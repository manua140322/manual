<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Элемент meta определяет метаданные документа. -->
	<meta charset="utf-8">
	<!-- Мета-теги для адаптивной вёрстки -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Bootstrap CSS-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<!-- Дополнительный JavaScript; Bootstrap в связке с Popper -->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
	<!-- jQuery -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<!-- Стили пользователя-->
	<link rel="stylesheet" href="../css/styles.css">
</head>
<body>
	<div class="container" style="padding: 5px" >
		<div class="row justify-content-center">
			<a href="../index.html"><h2>Лекции</h2></a>			
		</div>
		<div class="row justify-content-center">
			<h3>Лекция 2. Анализ существующих методов выбора архитектуры параллельных баз данных.</h3>			
		</div>
		<div style="margin-top:25px;">
		
				<h2><a name="_Toc69577397">2.1 Классификация Стоунбрейкера</a></h2>
				<p>Наиболее распространенной системой классификации параллельных систем баз данных является система, предложенная Майклом Стоунбрейкером (Michael Stonebraker) в работе. Схематично данная классификация изображена на рис. 1. Здесь P обозначает процессор, M – модуль оперативной памяти, D – дисковое устройство, N - соединительную сеть.</p>
				<p><img id="Рисунок 3" src="image001.gif" alt="https://pdbs.susu.ru/CourseManual.files/image036.gif"></p>
				<p><a name="_Ref13119991"></a><a name="_Ref13119987"></a> </p>
				<p>Рисунок 1. Классификация Стоунбрейкера</p>
				<p>В соответствие с классификацией Стоунбрейкера параллельные системы баз данных могут быть разделены на следующие три базовых класса в зависимости от способа разделения аппаратных ресурсов:</p>
				<p>(a) SE (Shared-Everything) - архитектура с разделяемыми памятью и дисками;</p>
				<p>(б) SD (Shared-Disks) - архитектура с разделяемыми дисками;</p>
				<p>(в) SN (Shared-Nothing) - архитектура без совместного использования ресурсов.</p>
				<p>SE архитектура (в работе эта архитектура обозначается как Shared-Memory) представляет системы баз данных, в которых все диски напрямую доступны всем процессорам с одинаковым временем доступа и все процессоры разделяют общую оперативную память. Межпроцессорные коммуникации в SE системах осуществляются через общую оперативную память. Доступ к дискам в SE системах обычно осуществляется через общий буферный пул. При этом следует отметить, что каждый процессор в SE системе имеет собственную кэш-память.</p>
				<p>Существует большое количество параллельных систем баз данных с SE архитектурой. По существу, все ведущие коммерческие СУБД сегодня имеют реализацию на базе SEархитектуры. В качестве одного из первых примеров портирования с однопроцессорной системы на SE архитектуру можно привести реализацию DB2 на IBM3090 с 6 процессорами. Другим примером является параллельное построение индексов в Informix OnLine 6.0. Следует отметить, однако, что подавляющее большинство коммерческих SEсистем использует только межтранзакционный параллелизм (то есть внутритранзакционный параллелизм отсутствует). Тем не менее, к настоящему моменту создано несколько исследовательских прототипов SE систем, использующих внутризапросный параллелизм, например, XPRS, DBS3 и Volcano.</p>
				<p>Базовой аппаратной платформой для реализации систем с SE архитектурой обычно служит SMP, хотя потенциально SE системы можно строить на платформах с архитектурой NUMA и даже MPP с виртуально общей, физически распределенной памятью.</p>
				<p>SD архитектура представляет системы баз данных, в которых любой процессор имеет доступ к любому диску, однако каждый процессор имеет свою приватную оперативную память. Процессоры в таких системах соединены посредством некоторой высокоскоростной сети, позволяющей осуществлять передачу данных. </p>
				<p>Примерами параллельных систем баз данных с SD архитектурой являются IBM IMS, Oracle Parallel Server, IBM Parallel Sysplex и др.</p>
				<p>SN архитектура характеризуется наличием у каждого процессора собственной оперативной памяти и собственного диска. Как и в SD системах, процессорные узлы соединены некоторой высокоскоростной сетью, позволяющей организовывать обмен сообщениями между процессорами. К настоящему моменту создано большое количество исследовательских прототипов и несколько коммерческих систем с SN архитектурой, использующих фрагментный параллелизм. В качестве примеров исследовательских прототипов SN систем можно привести следующие системы: ARBRE, BUBBA, EDS, GAMMA, KARDAMOM, PRISMA.</p>
				<p>Примерами коммерческих систем с SN архитектурой являются NonStop SQL, Informix PDQ, NCR (Teradata) DBC/1012 и др.</p>
				<p><a name="_Toc69577398"> </a></p>
				<p>2.1 Расширение классификации Стоунбрейкера</p>
				<p>Копеланд (Copeland) и Келлер (Keller) предложили в работе расширение классификации Стоунбрейкера путем введения двух дополнительных классов архитектур параллельных машин баз данных (рис. 1):</p>
				<p>(г) CE (Clustered-Everything) - архитектура с SE кластерами, объединенными по принципу SN;</p>
				<p>(д) CD (Clustered-Disk) - архитектура с SD кластерами, объединенными по принципу SN. Граница SD кластеров на рис. 2 распространены на общую (глобальную) соединительную сеть, так как в них может присутствовать собственная (локальная) соединительная сеть.</p>
				<p><img id="Рисунок 2" src="image002.gif" alt="https://pdbs.susu.ru/CourseManual.files/image038.gif"></p>
				<p><a name="_Ref16347324"> </a></p>
				<p>Рисунок 2. Расширение классификации Стоунбрейкера</p>
				<p>Эти архитектуры также получили название иерархических. На рис. 2 изображены двухуровневые иерархии. Однако классификационный подход Копеланда и Келлера легко может быть распространен на архитектуры с тремя и более уровнями иерархии. В качестве примера можно привести трехуровневую иерархическую архитектуру CD2. Данная архитектура была использована при проектировании системы Омега. <a name="_Toc69577399"></a></p>
				<p>Гибридная архитектура CDN</p>
				<p>Эрхард Рам в работе предложил рассматривать гибридные архитектуры. Гибридные архитектуры нельзя отнести ни к одному из выше описанных классов. В качестве примера гибридной архитектур можно привести архитектуру CDN. Данная архитектура строится как набор однотипных SD кластеров, объединенных по принципу SN. Отличительной особенностью данной системной архитектуры является то, что на верхних уровнях системной иерархии SDкластеры рассматриваются как SN системы (рис. 3). Это выражается в том, что каждому процессорному узлу логически назначается отдельный диск. Такой подход позволяет избежать проблем, связанных с реализацией глобальной таблицы блокировок и поддержкой когерентности кэшей, характерных для SD систем, и одновременно использовать преимущества SD архитектуры в плане возможности балансировки загрузки. Подобный подход был также использован при разработке параллельной системы баз данных NonStop SQL/MP.</p>
				<p><img id="Рисунок 1" src="image003.jpg" alt="https://pdbs.susu.ru/CourseManual.files/image040.jpg"></p>
				<p>Рисунок 3. Гибридная архитектура CDN</p>
				<p>Сравнительный анализ SE, SD и SN архитектур показал, что для масштабируемых высокопроизводительных систем баз данных из трех указанных архитектур наиболее предпочтительной является SN архитектура.</p>
				<p><a name="_Ref16444956"></a><a name="_Ref16532090"></a>Таблица 2. Сравнение архитектур</p>
				<div align=center>
				<table border=0 cellspacing=0 cellpadding=0>
				 <tr> <td valign=top> </td> <td valign=top> <p>SE</p> </td> <td valign=top> <p>SD</p> </td> <td valign=top> <p>SN</p> </td> <td valign=top> <p>CE</p> </td> <td valign=top> <p>CD</p> </td> <td valign=top> <p>C<sub>D</sub><sup>N</sup></p> </td> </tr>
				 <tr> <td valign=top> <p>Масштабируемость</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>1</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>3</p> </td> </tr>
				 <tr> <td valign=top> <p>Доступность данных</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>1</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>1</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>2</p> </td> </tr>
				 <tr> <td valign=top> <p>Баланс загрузки</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>1</p> </td> <td valign=top> <p>1</p> </td> </tr>
				 <tr> <td valign=top> <p>Межпроцессорные коммуникации</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>1</p> </td> <td valign=top> <p>1</p> </td> </tr>
				 <tr> <td valign=top> <p>Когерентность кэшей</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>3</p> </td> </tr>
				 <tr> <td valign=top> <p>Организация блокировок</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>3</p> </td> <td valign=top> <p>2</p> </td> <td valign=top> <p>0</p> </td> <td valign=top> <p>3</p> </td> </tr>
				 <tr> <td valign=top> <p>Сумма баллов</p> </td> <td valign=top> <p>10</p> </td> <td valign=top> <p>4</p> </td> <td valign=top> <p>11</p> </td> <td valign=top> <p>12</p> </td> <td valign=top> <p>7</p> </td> <td valign=top> <p>13</p> </td> </tr>
				</table>
				</div>
				<p>В табл. 2 приведен сравнительный анализ шести различных архитектур параллельных систем баз данных по критериям, непосредственно вытекающим из требований к параллельной системе баз данных. Для оценки показателей используется трехбалльная система: 0 ‑ «плохо»; 1 - «удовлетворительно», 2 - «хорошо», 3 – «превосходно».</p>
				<p>Масштабируемость SE архитектуры характеризуется как низкая. Это связано с тем, что при количестве процессорных узлов больше 30 общая шина доступа к памяти и дискам становится узким местом. SD архитектура демонстрирует среднюю масштабируемость, так как общая шина доступа к дискам по-прежнему остается узким местом. SN, CD, CE и CDN архитектуры демонстрируют хорошую масштабируемость.</p>
				<p>Доступность данных для SN архитектуры можно классифицировать как среднюю. Это связано с тем, что страховочные копии в SN системе должны фрагментироваться по многим узлам для того, чтобы в случае отказа одного из дисков его страховочная копия была доступна в параллельном режиме (в противном случае может возникнуть серьезный дисбаланс загрузки). Поддержание когерентности фрагментированных страховочных копий потребует определенных накладных расходов, связанных прежде всего с пересылкой большого количества данных по соединительной сети. SE и CE архитектуры характеризуется "плохой" доступностью данных из-за низкой аппаратной отказоустойчивости SE кластера. </p>
				<p>SD, CD и CDN архитектуры демонстрируют наилучшую доступность данных, так как все проблемы, связанные с обеспечением высокой доступности, могут быть эффективно решены на уровне отдельных SD кластеров.</p>
				<p>Баланс загрузки для SN архитектуры является серьезной проблемой, так как SN системы весьма чувствительны к перекосу данных. Иерархические архитектуры типа CE, CD и CDN позволяют достичь лучшей сбалансированности загрузки, так как баланс загрузки может здесь выполняться на двух уровнях - межкластерном и внутрикластерном. SD кластеры позволяют достичь удовлетворительной балансировки загрузки, поскольку каждому процессору доступны все диски. Наилучший баланс загрузки обеспечивают SE кластеры, так как помимо дисков процессорам доступна вся оперативная память.</p>
				<p>Высокая стоимость межпроцессорных коммуникаций является одной из слабых сторон SN архитектуры. Использование CE архитектуры позволяет значительно сократить накладные расходы, связанные с межпроцессорными коммуникациями. Межпроцессорные коммуникации на уровне SE кластера могут быть реализованы очень эффективно через разделяемую память. CD и CDN архитектуры уступают по этому показателю CE архитектуре, однако могут превзойти SN архитектуру, так как потенциально внутрикластерные коммуникации могут быть реализованы более эффективно, чем межкластерные.</p>
				<p>Когерентность кэшей является серьезной проблемой для CD архитектуры, так как в SD кластере одни и те же страницы разделяемых дисков буферизуются в индивидуальных модулях памяти. Копии страниц остаются в буферных пулах некоторое время после завершения обратившейся к ним транзакции, поэтому изменения, сделанные одним узлом SD кластера, могут быть аннулированы изменениями, сделанными другим узлом SD кластера. CE архитектура имеет лучшие показатели по данному параметру по сравнению с CD архитектурой, так как SEкластеры используют общий буферный пул в разделяемой памяти. Однако CE архитектура уступает по этому параметру SN архитектуре, так как в SE кластере необходимо поддерживать когерентность данных в индивидуальных кэш-памятях процессоров. CDN архитектура свободна от указанного недостатка, так как на виртуальном уровне в ней отсутствует разделение ресурсов. В SN системах проблема когерентности так же отсутствует, так как у них нет разделяемых ресурсов.</p>
				<p>Еще одной серьезной проблемой для CD архитектуры являются трудности с организацией блокировок объектов базы данных со стороны обращающихся к ним транзакций. В SDкластере на каждом процессорном узле необходимо поддерживать копию глобальной таблицы блокировок, что может потребовать серьезных накладных расходов. SE архитектура в значительной мере избавлена от этой проблемы, так как глобальная таблица блокировок SE кластера хранится в единственном экземпляре в разделяемой оперативной памяти. В SN системах нет необходимости в поддержании глобальной таблицы блокировок по причине отсутствия разделения ресурсов, поэтому SN архитектура занимает наилучшую позицию по данному параметру. CDN архитектура в полной мере наследует это качество от SN архитектуры.</p>
				<p>Исходя из проведенного анализа, мы можем сделать вывод, что нет весомых причин для поддержки CD архитектуры в чистом виде. CE архитектура выглядит более привлекательно, чем SE архитектура. Однако, если принимать во внимание требования к параллельной системе баз данных, наилучшим выбором является CDN архитектура.</p>

		
		</div>
		<div align="center">
			<a style="align:center" href="javascript:history.back();">Назад</a>	
			<a>|</a>
			<a style="align:center" href="javascript:scroll(0,0)">Наверх</a>	
		</div>				
	</div>	<!-- /container -->
</body>
</html>